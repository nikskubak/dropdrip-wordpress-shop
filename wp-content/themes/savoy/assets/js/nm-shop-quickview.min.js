/* NM: Quick-view script */
(function(a){a.extend(a.nmTheme,{quickview_init:function(){var b=this,f=a("#nm-quickview"),c=a('<div id="nm-quickview-overlay" class="mfp-bg nm-mfp-fade-in"></div>'),g;b.$body.on("click",".nm-quickview-btn",function(d){d.preventDefault();if(g=a(this).data("product_id"))b.$html.css("width","auto"),c.appendTo(b.$body),c.addClass("show mfp-ready nm-loader"),k()});var k=function(){var d={product_id:g};if("undefined"!==typeof wc_add_to_cart_params)var h=wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%",
"nm_ajax_load_product");else h=nm_wp_vars.ajaxUrl,d.action="nm_ajax_load_product";window.nm_quickview_get_product=a.ajax({type:"POST",url:h,data:d,dataType:"html",cache:!1,headers:{"cache-control":"no-cache"},beforeSend:function(){"object"===typeof window.nm_quickview_get_product&&window.nm_quickview_get_product.abort()},error:function(a,d,e){console.log("NM: AJAX error - _qvLoadProduct() - "+e);b.$html.css("width","");c.removeClass("mfp-ready mfp-removing").remove()},success:function(c){f.html(c);
var d=f.children("#product-"+g),e=d.find("form.cart");a("#nm-quickview-slider").find("img").last().one("load",function(){d.hasClass("product-variable")&&(e.wc_variation_form().find(".variations select:eq(0)").change(),b.singleProductVariationsInit(e),e.on("woocommerce_variation_select_change",function(){b.qvHasSlider&&b.$qvSlider.slick("slickGoTo",0,!1)}));b.quantityInputsBindButtons(a("#nm-qv-product-summary"));l()})}})},l=function(){a.magnificPopup.open({mainClass:"nm-mfp-quickview nm-mfp-fade-in",
closeMarkup:'<a class="mfp-close nm-font nm-font-close2"></a>',removalDelay:180,items:{src:f,type:"inline"},callbacks:{open:function(){c.removeClass("nm-loader");b.qvHasSlider=!1;b.$qvSlider=a("#nm-quickview-slider");1<b.$qvSlider.children().length&&(b.qvHasSlider=!0,b.$qvSlider.slick({prevArrow:'<a class="slick-prev"><i class="nm-font nm-font-angle-left"></i></a>',nextArrow:'<a class="slick-next"><i class="nm-font nm-font-angle-right"></i></a>',dots:!1,infinite:!1,speed:350}));c.one("touchstart.qv",
function(){a.magnificPopup.close()})},beforeClose:function(){c.addClass("mfp-removing")},close:function(){b.$html.css("width","");c.removeClass("mfp-ready mfp-removing").remove()}}})}}});a.nmThemeExtensions.quickview=a.nmTheme.quickview_init})(jQuery);